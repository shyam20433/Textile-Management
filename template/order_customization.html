<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Customization</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 20px;
            background-color: #1a1a1a;
            border-bottom: 2px solid #39ff14;
            margin-bottom: 20px;
            border-radius: 10px;
        }

        .header h2 {
            font-family: 'Dancing Script', cursive;
            font-size: 36px;
            color: #39ff14;
            margin: 0;
        }

        h1 {
            text-align: center;
            font-size: 28px;
            margin-bottom: 20px;
            color: #39ff14;
        }

        .order-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            max-width: 1200px;
            margin: 0 auto;
            gap: 30px;
        }

        .dress-details,
        .customization-form {
            flex: 1;
            background-color: #1a1a1a;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }

        .dress-details {
            text-align: center;
        }

        .dress-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            margin-bottom: 15px;
            transition: transform 0.3s;
        }

        .dress-image:hover {
            transform: scale(1.05);
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        select:focus {
            border-color: #33CC33;
            outline: none;
        }

        button {
            background-color: #39ff14;
            color: #0c0c0c;
            padding: 12px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #33CC33;
        }

        .price-display {
            font-weight: bold;
            color: #39ff14;
            margin-top: 10px;
        }

        .gender-options {
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .gender-icon {
            font-size: 40px;
            transition: background-color 0.3s, transform 0.3s;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .gender-icon:hover {
            transform: scale(1.3);
            color: #39ff14;
            background-color: rgba(255, 255, 255, 0.2);
        }

        select {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: 2px solid #39ff14;
            margin-bottom: 20px;
            background-color: #0c0c0c;
            color: #f0f0f0;
            font-size: 16px;
        }
    </style>
</head>

<body>

    <div class="header">
        <h2>Customize Your Dress Order</h2>
    </div>

    <div class="order-container">
        <div class="dress-details">
            <h2>Dress Details</h2>
            <img src="{{ dress.image_url }}" alt="{{ dress.name }}" class="dress-image">
            <p><strong>Name:</strong> {{ dress.name }}</p>
            <p><strong>Description:</strong> {{ dress.description }}</p>
            <p><strong>Color:</strong> {{ dress.color }}</p>
            <p><strong>Material:</strong> {{ dress.type }}</p>
        </div>

        <div class="customization-form">
            <h1>Order Customization</h1>
            <form method="POST" action="{{ url_for('review_order', dress_id=dress._id) }}">
                <div>
                    <p><strong>Color:</strong> {{ dress.color }}</p>
                    <input type="hidden" id="color" name="color" value="{{ dress.color }}">
                </div>
                <input type="hidden" name="gender" id="gender" value="">
                <label>Gender:</label>
                <div class="gender-options">
                    <i class="gender-icon fas fa-baby" onclick="selectGender('baby')"></i>
                    <i class="gender-icon fas fa-male" onclick="selectGender('men')"></i>
                    <i class="gender-icon fas fa-female" onclick="selectGender('women')"></i>
                </div>

                <label for="dress_type">Dress Type:</label>
                <select name="dress_type" id="dress_type" required onchange="updateDesignOptions()">
                    <option value="">Select Dress Type</option>
                </select>

                <label for="dress_design">Dress Design:</label>
                <select name="dress_design" id="dress_design" required>
                    <option value="">Select Dress Design</option>
                </select>

                <label for="size">Size:</label>
                <select name="size" id="size" required>
                    <option value="">Select Size</option>
                </select>

                <label for="age">Age:</label>
                <select name="age" id="age" required>
                    <option value="">Select Age</option>
                    <option value="1-5">1-5</option>
                    <option value="6-10">6-10</option>
                    <option value="11-15">11-20</option>
                    <option value="16-20">21-30</option>
                    <option value="21-25">31-40</option>
                    <option value="41-45">41-50</option>
                    <option value="51-55">51-60</option>
                </select>

                <div id="price-display" class="price-display"></div>

                <label for="quantity">Quantity:</label>
                <select name="quantity" id="quantity" required>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>

                <button type="submit">Order Now</button>
            </form>
        </div>
    </div>

    <script>
        const dressData = {
            baby: {
                'Footed romper': {
                    designs: ['Full Hand', 'Half Hand', 'Sleeveless', 'Shorts'],
                    sizes: { 'small': { price: (0.60 * {{ dress.price }}) }, 'medium': { price: (0.75 * {{ dress.price }}) }, 'large': { price: (1.00 * {{ dress.price }}) } }
                },
                'Snap-up romper': {
                    designs: ['Full Hand', 'Half Hand', 'Sleeveless', 'Shorts'],
                    sizes: { 'small': { price: (0.60 * {{ dress.price }}) }, 'medium': { price: (0.75 * {{ dress.price }}) }, 'large': { price: (1.00 * {{ dress.price }}) } }
                },
                'Hoody': {
                    designs: ['Hooded onesie','Baby sweat suit', 'Cotton jumpsuit'],
                    sizes: { 'small': { price: (0.60 * {{ dress.price }}) }, 'medium': { price: (0.75 * {{ dress.price }}) }, 'large': { price: (1.00 * {{ dress.price }}) } }
                },

            },
            men: {
                'Pant': {
                    designs: ['Chinos', 'Jeans', 'Shorts', 'Cargo'],
                    sizes: { '28': { price: (1.00 * {{ dress.price }}) }, '30': { price: (1.00 * {{ dress.price }}) }, '32': { price: (1.00 * {{ dress.price }}) }, '34': { price: (1.00 * {{ dress.price }}) }, '36': { price: (1.00 * {{ dress.price }}) }, '38': { price: (1.00 * {{ dress.price }}) } }
                },
                'Shirt': {
                    designs: ['Full Hand', 'Casual', 'Half Hand', 'T-Shirt'],
                    sizes: { 'S': { price: (1.00 * {{ dress.price }}) }, 'M': { price: (1.00 * {{ dress.price }}) }, 'L': { price: (1.00 * {{ dress.price }}) }, 'XL': { price: (1.00 * {{ dress.price }}) } }
                },
                'Jacket': {
                    designs: ['Leather', 'Denim', 'Long sleeve'],
                    sizes: { 'S': { price: (1.00 * {{ dress.price }}) }, 'M': { price: (1.00 * {{ dress.price }}) }, 'L': { price: (1.00 * {{ dress.price }}) }, 'XL': { price: (1.00 * {{ dress.price }}) } }
                },
             'Sweater': {
                    designs: ['Pullover', 'Crew Neck', 'V-Neck'],
                    sizes: { 'S': { price: (1.00 * {{ dress.price }}) }, 'M': { price: (1.00 * {{ dress.price }}) }, 'L': { price: (1.00 * {{ dress.price }}) }, 'XL': { price: (1.00 * {{ dress.price }}) } }
                },

            },
            women: {
                'Top': {
                    designs: ['T-Shirt', 'Blouse', 'Tank Top', 'Hoodie'],
                    sizes: { 'S': { price: (1.00 * {{ dress.price }}) }, 'M': { price: (1.00 * {{ dress.price }}) }, 'L': { price: (1.00 * {{ dress.price }}) }, 'XL': { price: (1.00 * {{ dress.price }}) } }
                },
                'Skirt': {
                    designs: ['A-Line', 'Pencil', 'Maxi', 'Mini'],
                    sizes: { 'S': { price: (1.00 * {{ dress.price }}) }, 'M': { price: (1.00 * {{ dress.price }}) }, 'L': { price: (1.00 * {{ dress.price }}) }, 'XL': { price: (1.00 * {{ dress.price }}) } }
                },
                'Legging': {
                    designs: ['Full Length', 'Capri', 'High Waist', 'Printed'],
                    sizes: { '28': { price: (1.00 * {{ dress.price }}) }, '30': { price: (1.00 * {{ dress.price }}) }, '32': { price: (1.00 * {{ dress.price }}) }, '34': { price: (1.00 * {{ dress.price }}) }, '36': { price: (1.00 * {{ dress.price }}) }, '38': { price: (1.00 * {{ dress.price }}) } }
                },
                'Pant': {
                    designs: ['Straight', 'Skinny', 'Wide Leg', 'Culottes'],
                    sizes: { '28': { price: (1.00 * {{ dress.price }}) }, '30': { price: (1.00 * {{ dress.price }}) }, '32': { price: (1.00 * {{ dress.price }}) }, '34': { price: (1.00 * {{ dress.price }}) }, '36': { price: (1.00 * {{ dress.price }}) }, '38': { price: (1.00 * {{ dress.price }}) } }
                },
                'Jacket': {
                    designs: ['Long sleeve', 'Short Sleeve', 'Open Front'],
                    sizes: { 'S': { price: (1.00 * {{ dress.price }}) }, 'M': { price: (1.00 * {{ dress.price }}) }, 'L': { price: (1.00 * {{ dress.price }}) }, 'XL': { price: (1.00 * {{ dress.price }}) } }
                },
            }
        };

        function selectGender(gender) {
            document.getElementById('gender').value = gender;
            updateDressTypeOptions();
        }

        function updateDressTypeOptions() {
            const gender = document.getElementById('gender').value;
            const dressTypeSelect = document.getElementById('dress_type');
            const dressDesignSelect = document.getElementById('dress_design');
            const sizeSelect = document.getElementById('size');
            const priceDisplay = document.getElementById('price-display');

            // Clear previous options
            dressTypeSelect.innerHTML = '<option value="">Select Dress Type</option>';
            dressDesignSelect.innerHTML = '<option value="">Select Dress Design</option>';
            sizeSelect.innerHTML = '<option value="">Select Size</option>';
            priceDisplay.innerHTML = '';

            if (gender) {
                // Populate dress types based on the selected gender
                Object.keys(dressData[gender]).forEach((type) => {
                    const option = document.createElement('option');
                    option.value = type;
                    option.textContent = type;
                    dressTypeSelect.appendChild(option);
                });
            }
        }

        function updateDesignOptions() {
            const gender = document.getElementById('gender').value;
            const dressType = document.getElementById('dress_type').value;
            const dressDesignSelect = document.getElementById('dress_design');
            const sizeSelect = document.getElementById('size');
            const priceDisplay = document.getElementById('price-display');

            // Clear previous options
            dressDesignSelect.innerHTML = '<option value="">Select Dress Design</option>';
            sizeSelect.innerHTML = '<option value="">Select Size</option>';
            priceDisplay.innerHTML = '';

            if (gender && dressType) {
                // Populate dress designs based on the selected dress type
                dressData[gender][dressType].designs.forEach((design) => {
                    const option = document.createElement('option');
                    option.value = design;
                    option.textContent = design;
                    dressDesignSelect.appendChild(option);
                });

                // Populate sizes based on the selected dress type
                Object.keys(dressData[gender][dressType].sizes).forEach((size) => {
                    const option = document.createElement('option');
                    option.value = size;
                    option.textContent = size;
                    sizeSelect.appendChild(option);
                });
            }
        }

        function updatePriceDisplay() {
            const gender = document.getElementById('gender').value;
            const dressType = document.getElementById('dress_type').value;
            const selectedSize = document.getElementById('size').value;
            const quantity = document.getElementById('quantity').value;
            const priceDisplay = document.getElementById('price-display');

            if (gender && dressType && selectedSize) {
                const price = dressData[gender][dressType].sizes[selectedSize].price;
                const total = price * quantity;
                priceDisplay.innerHTML = `Price: â‚¹${total.toFixed(2)}`;
            } else {
                priceDisplay.innerHTML = '';
            }
        }

        document.getElementById('size').addEventListener('change', updatePriceDisplay);
        document.getElementById('quantity').addEventListener('change', updatePriceDisplay);
    </script>
</body>
</html>